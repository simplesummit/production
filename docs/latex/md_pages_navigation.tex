The \mbox{\hyperlink{classHomePage}{Home\+Page}} class houses the main slots that convert gamepad input into noticable interactions on the UI.

The gamepad\textquotesingle{}s left joystick is used to navigate, like many other applications that use gamepad input. Since Leconte uses signals and slots, \mbox{\hyperlink{classHomePage}{Home\+Page}} uses two signals emitted by the Gamepad\+: {\ttfamily Q\+Gamepad\+::axis\+Left\+X\+Changed()} and {\ttfamily Q\+Gamepad\+::axis\+Left\+X\+Changed()}.

\subsubsection*{The Math}

There are four cards on the \mbox{\hyperlink{classHomePage}{Home\+Page}}, arranged with one at the top and three in a row at the bottom. To see which card is selected, we needed to calculate the rotation of the joystick, a process we achieved by using some trigonometry.

Take, for instance, the method used in {\ttfamily \mbox{\hyperlink{classHomePage_a38c909855e6b1e1a0739642949aa4f9a}{Home\+Page\+::get\+LeftY}}}\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{...}
\DoxyCodeLine{void \mbox{\hyperlink{classHomePage_a38c909855e6b1e1a0739642949aa4f9a}{HomePage::getLeftY}}(\textcolor{keywordtype}{double} value) \{}
\DoxyCodeLine{value = round(value) * -1;}
\DoxyCodeLine{\textcolor{keywordtype}{double} lx\_axis = round(\mbox{\hyperlink{classHomePage_a10f488d4dde0b7dd002988adbba952ea}{m\_gamepad}}->axisLeftX());}
\DoxyCodeLine{\textcolor{keywordtype}{double} deg = round(std::atan2(value, lx\_axis) * 180 / \mbox{\hyperlink{homepage_8cpp_a598a3330b3c21701223ee0ca14316eca}{PI}});}
\DoxyCodeLine{...}
\DoxyCodeLine{\}}
\end{DoxyCode}


As you can see, the function gets the joystick input, rounds it, and uses it along with the x-\/axis in arctan2, which gives the complete angle of rotation. After converting this to radians, the function then processes it, calculating which card it is selecting.


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{if}(deg > -145 \&\& deg < -125) \{}
\DoxyCodeLine{    state = \mbox{\hyperlink{datatypes_8h_a5d74787dedbc4e11c1ab15bf487e61f8aeb17575c0e1370c0925914c0e1ce0a9b}{ST\_SM\_LFT}};}
\DoxyCodeLine{    activeCard = \textcolor{stringliteral}{"l\_small\_box"};}
\DoxyCodeLine{\} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(deg > -100 \&\& deg < -80) \{}
\DoxyCodeLine{    state = \mbox{\hyperlink{datatypes_8h_a5d74787dedbc4e11c1ab15bf487e61f8a2e6c81096476bb7c77e8f25f5aac49e0}{ST\_SM\_MID}};}
\DoxyCodeLine{    activeCard = \textcolor{stringliteral}{"m\_small\_box"};}
\DoxyCodeLine{\} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(deg > -55 \&\& deg < -35) \{}
\DoxyCodeLine{    state = \mbox{\hyperlink{datatypes_8h_a5d74787dedbc4e11c1ab15bf487e61f8adc467f20dd7b873850629bb2e476a878}{ST\_SM\_RGT}};}
\DoxyCodeLine{    activeCard = \textcolor{stringliteral}{"r\_small\_box"};}
\DoxyCodeLine{\} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{    activeCard = \textcolor{stringliteral}{"m\_large\_box"};}
\DoxyCodeLine{    state = \mbox{\hyperlink{datatypes_8h_a5d74787dedbc4e11c1ab15bf487e61f8a544826356a5fc5d235720fd79e46617c}{ST\_LG\_CARD}};}
\DoxyCodeLine{\}}
\end{DoxyCode}


{\ttfamily state} is an enumerated type of each card and {\ttfamily active\+Card} is used in {\ttfamily \mbox{\hyperlink{classHomePage_ab3daab17f753e46efcec8968333f88b5}{Home\+Page\+::paint\+Event}}} to apply a green drop shadow to the active card.

\subsubsection*{Hover Effect}

Along with a green drop shadow, the highlighted card also is raised 18 pixels to further emphasize its active state. This is done with the help of Q\+Property\+Animation, an animation effect in Qt that has a custom start and end value.

There were a couple issues when first implementing this. For one, the cards would not return to their original place on release, so a base animation state was created. Secondly, the cards could be manipulated into continually raising, giving the top card the ability to be completely raised above the screen. To fix this, the base animation state was modified to force it to check the position of the card.

This fixed the issues, but caused there to be a jarring fall of the cards whenever the joystick was released.

\subsubsection*{The Complication}

Since there are four main cards can select, the \mbox{\hyperlink{classHomePage}{Home\+Page}} needs to process changes in both the x-\/axis and y-\/axis. Since both of the signals fire at the same time, it is difficult to get a complete measurement without relying on just one. Because of this, there are som odd samples that occur with rotating rapidly. This produces a glitchly effect in the \mbox{\hyperlink{classHomePage}{Home\+Page}} with both the drop shadow and the raising effect.

\subsubsection*{The Future}

Both the drop shadow and raising effect bugs need to be fixed. A rethink in how the navigation works may be in order. 