<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simple Summit UI: Navigation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3/build/web/hack.css">
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Simple Summit UI
   </div>
   <div id="projectbrief">An interface to be used for outreach for the Oak Ridge National Laboratory.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Navigation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="classHomePage.html" title="The landing page for the application.">HomePage</a> class houses the main slots that convert gamepad input into noticable interactions on the UI.</p>
<p>The gamepad's left joystick is used to navigate, like many other applications that use gamepad input. Since Leconte uses signals and slots, <a class="el" href="classHomePage.html" title="The landing page for the application.">HomePage</a> uses two signals emitted by the Gamepad: <code>QGamepad::axisLeftXChanged()</code> and <code>QGamepad::axisLeftXChanged()</code>.</p>
<h2>The Math</h2>
<p>There are four cards on the <a class="el" href="classHomePage.html" title="The landing page for the application.">HomePage</a>, arranged with one at the top and three in a row at the bottom. To see which card is selected, we needed to calculate the rotation of the joystick, a process we achieved by using some trigonometry.</p>
<p>Take, for instance, the method used in <code><a class="el" href="classHomePage.html#a38c909855e6b1e1a0739642949aa4f9a">HomePage::getLeftY</a></code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line">...</div><div class="line">void <a class="code" href="classHomePage.html#a38c909855e6b1e1a0739642949aa4f9a">HomePage::getLeftY</a>(<span class="keywordtype">double</span> value) {</div><div class="line">value = round(value) * -1;</div><div class="line"><span class="keywordtype">double</span> lx_axis = round(<a class="code" href="classHomePage.html#a10f488d4dde0b7dd002988adbba952ea">m_gamepad</a>-&gt;axisLeftX());</div><div class="line"><span class="keywordtype">double</span> deg = round(std::atan2(value, lx_axis) * 180 / <a class="code" href="homepage_8cpp.html#a598a3330b3c21701223ee0ca14316eca">PI</a>);</div><div class="line">...</div><div class="line">}</div></div><!-- fragment --><p>As you can see, the function gets the joystick input, rounds it, and uses it along with the x-axis in arctan2, which gives the complete angle of rotation. After converting this to radians, the function then processes it, calculating which card it is selecting.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span>(deg &gt; -145 &amp;&amp; deg &lt; -125) {</div><div class="line">    state = <a class="code" href="datatypes_8h.html#a5d74787dedbc4e11c1ab15bf487e61f8aeb17575c0e1370c0925914c0e1ce0a9b">ST_SM_LFT</a>;</div><div class="line">    activeCard = <span class="stringliteral">&quot;l_small_box&quot;</span>;</div><div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span>(deg &gt; -100 &amp;&amp; deg &lt; -80) {</div><div class="line">    state = <a class="code" href="datatypes_8h.html#a5d74787dedbc4e11c1ab15bf487e61f8a2e6c81096476bb7c77e8f25f5aac49e0">ST_SM_MID</a>;</div><div class="line">    activeCard = <span class="stringliteral">&quot;m_small_box&quot;</span>;</div><div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span>(deg &gt; -55 &amp;&amp; deg &lt; -35) {</div><div class="line">    state = <a class="code" href="datatypes_8h.html#a5d74787dedbc4e11c1ab15bf487e61f8adc467f20dd7b873850629bb2e476a878">ST_SM_RGT</a>;</div><div class="line">    activeCard = <span class="stringliteral">&quot;r_small_box&quot;</span>;</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">    activeCard = <span class="stringliteral">&quot;m_large_box&quot;</span>;</div><div class="line">    state = <a class="code" href="datatypes_8h.html#a5d74787dedbc4e11c1ab15bf487e61f8a544826356a5fc5d235720fd79e46617c">ST_LG_CARD</a>;</div><div class="line">}</div></div><!-- fragment --><p><code>state</code> is an enumerated type of each card and <code>activeCard</code> is used in <code><a class="el" href="classHomePage.html#ab3daab17f753e46efcec8968333f88b5">HomePage::paintEvent</a></code> to apply a green drop shadow to the active card.</p>
<h2>Hover Effect</h2>
<p>Along with a green drop shadow, the highlighted card also is raised 18 pixels to further emphasize its active state. This is done with the help of QPropertyAnimation, an animation effect in Qt that has a custom start and end value.</p>
<p>There were a couple issues when first implementing this. For one, the cards would not return to their original place on release, so a base animation state was created. Secondly, the cards could be manipulated into continually raising, giving the top card the ability to be completely raised above the screen. To fix this, the base animation state was modified to force it to check the position of the card.</p>
<p>This fixed the issues, but caused there to be a jarring fall of the cards whenever the joystick was released.</p>
<h2>The Complication</h2>
<p>Since there are four main cards can select, the <a class="el" href="classHomePage.html" title="The landing page for the application.">HomePage</a> needs to process changes in both the x-axis and y-axis. Since both of the signals fire at the same time, it is difficult to get a complete measurement without relying on just one. Because of this, there are som odd samples that occur with rotating rapidly. This produces a glitchly effect in the <a class="el" href="classHomePage.html" title="The landing page for the application.">HomePage</a> with both the drop shadow and the raising effect.</p>
<h2>The Future</h2>
<p>Both the drop shadow and raising effect bugs need to be fixed. A rethink in how the navigation works may be in order. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<!-- <hr class="footer"/> -->
<address class="footer">
    <small>
Generated on Thu Aug 1 2019 16:40:35 for Simple Summit UI by &#160;<a href="http://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.png" alt="doxygen"/>
        </a> 1.8.15
    </small>
</address>
</body>
</html>
